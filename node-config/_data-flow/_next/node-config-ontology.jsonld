{
  "@context": {
    "owl": "http://www.w3.org/2002/07/owl#",
    "rdf": "http://www.w3.org/1999/02/22-rdf-syntax-ns#",
    "rdfs": "http://www.w3.org/2000/01/rdf-schema#",
    "xsd": "http://www.w3.org/2001/XMLSchema#",
    "sh": "http://www.w3.org/ns/shacl#",
    "dcterms": "http://purl.org/dc/terms/",
    "node": "https://semantic-flow.github.io/ontology/node-config/"
  },
  "@graph": [
    {
      "@id": "node:",
      "@type": "owl:Ontology",
      "dcterms:title": "Node Configuration Ontology",
      "dcterms:description": "Vocabulary for configuring semantic flow mesh nodes using the _config-flow approach",
      "dcterms:creator": "Semantic Flow Project",
      "owl:versionInfo": "0.1.0"
    },
    {
      "@id": "node:TemplateMapping",
      "@type": "owl:Class",
      "rdfs:label": "Template Mapping",
      "rdfs:comment": "Mapping of template types to template file paths"
    },
    {
      "@id": "node:versioningEnabled",
      "@type": "owl:DatatypeProperty",
      "rdfs:label": "versioning enabled",
      "rdfs:comment": "Whether flow versioning is enabled for this node",
      "rdfs:domain": { "@id": "node:NodeConfig" },
      "rdfs:range": { "@id": "xsd:boolean" }
    },
    {
      "@id": "node:configInheritanceEnabled",
      "@type": "owl:DatatypeProperty",
      "rdfs:label": "config inheritance enabled",
      "rdfs:comment": "Whether this node inherits configuration from parent nodes",
      "rdfs:domain": { "@id": "node:NodeConfig" },
      "rdfs:range": { "@id": "xsd:boolean" }
    },
    {
      "@id": "node:distributionFormats",
      "@type": "owl:DatatypeProperty",
      "rdfs:label": "distribution formats",
      "rdfs:comment": "List of RDF serialization formats to generate for distributions",
      "rdfs:domain": { "@id": "node:NodeConfig" },
      "rdfs:range": { "@id": "xsd:string" }
    },
    {
      "@id": "node:hasTemplateMapping",
      "@type": "owl:ObjectProperty",
      "rdfs:label": "has template mapping",
      "rdfs:comment": "Template mappings for resource page generation",
      "rdfs:domain": { "@id": "node:NodeConfig" },
      "rdfs:range": { "@id": "node:TemplateMapping" }
    },
    {
      "@id": "node:resourcePage",
      "@type": "owl:DatatypeProperty",
      "rdfs:label": "resource page template",
      "rdfs:comment": "Template file path for resource pages",
      "rdfs:domain": { "@id": "node:TemplateMapping" },
      "rdfs:range": { "@id": "xsd:string" }
    },
    {
      "@id": "node:generateUnifiedDataset",
      "@type": "owl:DatatypeProperty",
      "rdfs:label": "generate unified dataset",
      "rdfs:comment": "Whether to generate unified dataset components",
      "rdfs:domain": { "@id": "node:NodeConfig" },
      "rdfs:range": { "@id": "xsd:boolean" }
    },
    {
      "@id": "node:generateAggregatedDataset",
      "@type": "owl:DatatypeProperty",
      "rdfs:label": "generate aggregated dataset",
      "rdfs:comment": "Whether to generate aggregated dataset components",
      "rdfs:domain": { "@id": "node:NodeConfig" },
      "rdfs:range": { "@id": "xsd:boolean" }
    },
    {
      "@id": "node:generateResourcePages",
      "@type": "owl:DatatypeProperty",
      "rdfs:label": "generate resource pages",
      "rdfs:comment": "Whether to generate HTML resource pages during weave",
      "rdfs:domain": { "@id": "node:NodeConfig" },
      "rdfs:range": { "@id": "xsd:boolean" }
    },
    {
      "@id": "node:stylesheetPath",
      "@type": "owl:DatatypeProperty",
      "rdfs:label": "stylesheet path",
      "rdfs:comment": "Path to CSS stylesheet for generated pages",
      "rdfs:domain": { "@id": "node:NodeConfig" },
      "rdfs:range": { "@id": "xsd:string" }
    },
    {
      "@id": "node:DistributionFormatShape",
      "@type": "sh:NodeShape",
      "sh:targetObjectsOf": { "@id": "node:distributionFormats" },
      "sh:property": {
        "@type": "sh:PropertyShape",
        "sh:path": { "@id": "rdf:value" },
        "sh:in": {
          "@list": [
            "application/trig",
            "application/ld+json",
            "text/turtle",
            "application/n-triples",
            "application/n-quads",
            "application/rdf+xml"
          ]
        },
        "sh:message": "Distribution format must be a valid RDF media type"
      }
    },
    {
      "@id": "node:NodeConfigShape",
      "@type": "sh:NodeShape",
      "sh:targetClass": { "@id": "node:NodeConfig" },
      "sh:property": [
        {
          "@type": "sh:PropertyShape",
          "sh:path": { "@id": "node:distributionFormats" },
          "sh:minCount": 1,
          "sh:message": "At least one distribution format must be specified"
        },
        {
          "@type": "sh:PropertyShape",
          "sh:path": { "@id": "node:stylesheetPath" },
          "sh:pattern": "^[^/].*\\.(css|scss|sass)$",
          "sh:message": "Stylesheet path must be a relative path ending in .css, .scss, or .sass"
        }
      ]
    },
    {
      "@id": "node:TemplatePathShape",
      "@type": "sh:NodeShape",
      "sh:targetObjectsOf": { "@id": "node:resourcePage" },
      "sh:property": {
        "@type": "sh:PropertyShape",
        "sh:path": { "@id": "rdf:value" },
        "sh:pattern": "^[^/].*\\.(html|htm|hbs|mustache)$",
        "sh:message": "Template path must be a relative path ending in .html, .htm, .hbs, or .mustache"
      }
    }
  ]
}
